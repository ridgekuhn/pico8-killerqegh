---title app state

---override p8 loop
function title_init()
  if(stat(24) == -1) then
    music(0)
  end

  selection = 1

  _update = title_update
  _draw = title_draw
end

---update title menu
function title_update()
  --move cursor
  if(btnp(‚¨áÔ∏è)) then
    sfx(8)

    selection = 2

  elseif(btnp(‚¨ÜÔ∏è)) then
    sfx(8)

    selection = 1
  end

  if(btnp(üÖæÔ∏è)) then
    if(selection == 2) then
      config_init()
    else
      game_init()
    end
  end
end

---draw title menu
function title_draw()
  cls()
  camera()

  local cursor = 0

  draw_img(img)

  if(selection == 1) then
    cursor = 92
  else
    cursor = 99
  end

  rectfill(38, 90, 90, 105, 0)
  --cursor
  print('‚óÜ', 40, cursor, 7)

  print('start game\noptions', 48, 92, 7)

  --version
  print('V1.0.1', 100, 120, 13)
end

function draw_img()
  local img="00000000000002555ddddddd5101111111112222112222222222221011222222221122221111111111221015555555552221002000000000000000000000000100000000000001555ddddddd5101111111122222222222222222222112222222222222222225552222221015555555552221112000000000000000000000000100000000000001555ddddddd51012111111111222222222222222221122222222222552555555555555210155555555522211d20000000000000000000000001000000000000015555dddddd5101222222222222222225522222252112225222222255552555555555521115555555552221dd10000000000000000010000001000000000000015555ddddd55101555555555555555555555555555115225555555555555555555555521115dd5555552225d120000000000000000001000001000000000000015555ddddd551015555555555dd55555555555555511555555555555555555555555555111555555555525d1150001111100000000000000001000001100012225555dddd55510155555d55dddd5555555555555551155555555555555555555555555511155555555555dd015000122210000010000000000100000220002555555555dd55510155555d55dddddd5dd55555dddd511555555555555555555555555555111555d555555dd11150001222100000000000000001000002200025555555dddddd5101555555555555555555555555552115525522522222555522522252211115555555555d5222d0001222100000000001100012000001200025555555dddddd510011110000000000000000000000010000000110001111111110000100001555555555d2552250001221000000112544422524000001200025555555dddddd51000000000000000000000000000000000000000000000000000000000000155555555d525525d00012210000024444442520240000001001255555555555dd510000000000000000000000000000000000000000000000000000000000001555555555225225d000122100000445211100002200000010012555555555555d510000000000000000000000000000000000000000000000000000000000001555555555225515d000122100001110001000002200000000012555555555555d510000000000000000000000000000000000000000000000000000000000001555555555225d11d000122100000000000000001200000000012555555ddd55dd510000000000000000000000000000000000000000000000000000000000001555555555225211d000122100000000011211101100000000012555555ddd5ddd51100000000000000000000000000000000000000000000000000000000000155555555d225115d00012200000011244444255110000000001255555ddd55ddd51000000000000000000000000000000000000000000000000000000000000155555555d525125d00012200000024444444455110000000001255555ddd5555d51000000000000000000000000000000000000000000001000011000000000155555555d525d25d0001210000002444444425211000011000125555555dd555551000000000011000000000000000000000000000000001000000100000000155555555d52dd25d100121012200244522211000100012220012555555dddccccccccc000cccccccccc00ccccccccc000ccccccccccc0000000000110000000155555555d22dd25d0001222224211110000000001000124210125555ddd5ccccccccc001ccccccccccc0cccccccccc000ccccccccccc0000011001111100000155555555d52dd25d1001222222211000011000001000122200125555dd5cccccccccc001cccccccccc00cccccccccc00cccccccccccc0000000001111000000155555555d52dd25d00022222222000000110000010000122001255555d5cccc00000000110000000000000000cccc0000000000cccc00000000111101100000155555555d55dd25d0101222211011001001000001000000000125555555cccc00000000110000000000000000cccc0000000000cccc00000000011000100100155555555d55dd22d0001210000001000001000001000000000122225555ccccc5511001111111000000000000cccc000000000cccc000000000001111101252255555555d55d11dd0001210000000001112211011000000000012225555cccccccc100011cccc100000ccc00cccc000ccccccccccc000000000001111125dd5555555555d55d11dd00012100000012544552100100000000001122555dddcccccccc00011cccc00000cccc00cccc00cccccccccccc000000000001111255dd2252255555d55dd2dd00012100000122211110000000000000000122252dd20ccccccc0001cccc00000cccc000cccc00ccccccccccc000000000000111122252222222255dd55dd2dd0001210000000000000000000000000000012225dd22200ccccc0011cccc0000cccc000cccc00ccccc00cccc0000000000000011222222222221125dd55dd2dd000121000000000000000000000000000011222511115500cccc001cccc0000cccc0000cccc00cccc000cccc00000000000000112112222222210125d55dd2dd100121000000000000000000000000000011222521111111cccc001cccc0000ccc00000cccc00cccc000cccc0000000000000011220011111110012d6256d1dd10012100000000000000000000000000001122255111111cccc000ccccc000cccc00000cccc0cccc000cccc00000000000000011252000011100015d625661dd000121000000000000000000000000000011222cccccccccccc000cccc000ccccccccccccc00cccc000cccc00000cccccccccc5ccccccccccc000ccccccccccdcccc21ccccccc0000000000000000000011222cccccccccccc0000cccc00cccccccccccccc0cccc0000cccc0111cccccccccccdccccccccccc00ccccccccccdccccccccccccc0000100000000000000000112ccccccccccc00000cccc00ccccccccccccccc0cccc000cccc00100cccccccccc0cccccccccccc00cccccccccc0cccccccccccc00000000000000000000000112220000000000001010000010000000000000001000011110000100200000000000700000cccc0001000000000050000000000000000000000000000000001122200000000000110000000110000000000000001000011100001115400000000006000000cccc001100000000002000000000000000000110000000000010112222552111111111000100111000000000001111111111111111101440111111000d77722cccc00d2225dd25dd2d2000122210000000110110000100000110112222555111111110000000110000001111001111001111111111105f4cccc10000ccccccccccc00ccccccccccdccccccc22210000000000000000100000010012222555510011110010001110000001111101111111111111111104f5cccc0000cccccccccccc06cccccccccddccccccccc210000001111111001101000010012222221111101000111110110000001111111111111111111111104fcccc00000ccccccccccc006ccccccccc00ccccccccc210000011111111001111110010012221110000100001101111110000011111111111111011111111104ecccc0000ccccc00cccc000cccc0000000cccc000cccc1111111111111000111111111001111110000000011000011111100011111111111111001111111112ecccc00000cccc000cccc002cccc0000000cccc000cccc0111111110111000111111110001100000000000110000001111100010111111111111111111111102ecccc00500cccc000cccc00cccc0000001cccc00001cccc111000000111000110111111011000000000000000000000111100001111111111111111111101000ccccc0940cccc000cccc000cccc0000000cccc00001cccc100000001111000110011111000000000000000000000000000000011111111111111100110001105cccc00f42cccc000cccc00cccccccccc0cccc000001ccccc10011111111001110011110110000000000000000000000000000010111111111111100110001104cccc00fecccc0000cccc00cccccccccc0cccc0040012cccc1111111111000111000111142000000000000000000000000000001111111111111110011111110cccc00affcccc000cccc00cccccccccc0ccccc0fffe42ccccc111100011101122011111442200100000000000011111001000001111111011100000000111110ef0000fffe000000000000000000000000200009ffffee000011544444555449924444445200000111101001111111110000000111111101100000000000110040000ff99900000000000000000000000200000994effa000004444444445444422544442000000111111000111111110000010111111111111010000000010059449f99990000000000000000002222244424444999999fff9452211111011110001445200000001100001111111511000022111111111111111100000001005499e999940000000000000021000222244424444944449aaaff4100000001111001444200011000ccc0cccc11ccc51cc000220cc111111ccccccc01ccccccc049499efffccccccc00ccc00ccccccc20cccccccc444cc499cccffe1000000111100244220001200ccc0cccc01ccc11ccc00022ccc11111ccccccc00cccccccc0449fffffcccccccccccc10ccccccc222cccccccc44ccc449ccc9ffe211110155154442200012200ccc0ccc000ccc00ccc01022ccc01111ccc000000ccc00ccc054eeffffccc00ccc00cc00ccc000000ccc00000004ccc04ccc009fff42222244144422001112100cc0ccc0000cc00ccc00000ccc00111ccc0000001cc00ccc000e9999fccc000ccc00c00ccc0000005ccc0000000ccc002ccc009ffff424425554520111211210cccccc0000ccc00ccc00000ccc00111ccc001111cccccccc000444999ccc00cccc00000ccc005555ccc0ccccccccccccccc00999fffe42525554200111101210ccccc00010cc00ccc00000ccc00111cccccccc11ccccccc000005444ccc00eccc00d20ccccccccdcccc0ccccc7ccccccccc0099fffffe205445620010110110cccccc0000ccc00ccc00000ccc00111ccccccc11ccc00ccc000000222ccc004ccc0077dcccccccccccc006ccc00ccc000cc00449ffffff9015427d0101150110cc0ccc0000ccc00ccc01000ccc01111ccc000000ccc00ccc010000002ccc04cccc07777ccc000000ccc006cc007cc000ccc00f949ffffee5055166501115010ccc0cccc00ccc00ccc00010ccc00111ccc000000ccc00ccc001100000ccc000ccc006f7ccc000000cccc06ccc00ccc006ccc0677f49fee640111166610111000cc000ccc00ccc00cccccc10cccccc11ccccccc11ccc00ccc001100000cccccccccc06f7ccccccc7cccccccccc07ccc06ccc00767cc244e7e4152155555545000cc000ccc0ccc00ccccccc1ccccccc1cccccccc11cc00ccc0021000000cccccccccc26ecccccccc44cccccccc00ccc006ccc00a7cccf44ef764441100221110000000000000000000000000100000001100000001100011000110000000000000000066770000000d20000000007700066000caaacc7f246f76d210000011000000000000000000000000001000000010000000011000000000000000000000000000f660000000066000000007700066c000ccca7cc7e24ee6611000001000000000000000000000011110000444451111111111100000000000000000000000001d6242222d66666666666c766666cccccccccaa7c776e7e66c1000001000000000000000000001112221100244450110111111100000000000000000000000001d4222214111d6666666d66666cccccccccccccacc7777e66cc00000000000000000000000001121122211122494011111111110000000000000000000000001122100111000001566ddddd6cccccccccccccccaaccfee6666c000000000000000000000000011111122221244442222222222210000000000000000000011210020000000000000126ddd6dccccccccccccccccaad242466dc0000000000000000000000000110111111222444d55ddddddddd50000000000000000000012100000000000000000000ddddd6ccccccccccccccc6aa000566d61111110000100000000000000111000001662449e666666666666100000000000000000011100000000000000000000002d2d6dcccccccccccccc16ad00266dd222222000111000000000000000000000066d449e6666666666661000000000000000000110000000000000000000000001d15ddcccccccc1111116f6102642d2222210001111000000000000000000000666549966666666666610000000000100000011000000000000000000000000001212dd1cccc11111111144110442c222111001111110000000000000000000d6664499e66666666666d00000000016000000100000000000000000000000000001112d11c11111111dd1df6c2622d111122111112110000000000000000001666644eee66666666666d00000000006d000011000000000000000000000000000011111111111111511115f6d1220111222211112221100000000000000000d6666d444e66666666666d0000000000660000100000000000000000000000000000011112dd1111110111115dd5210022222211112221100100000000000000d66666446777666666666d0000000000d61001100000000000000000000000000000001111111111d520112551d6d11122222101112221101555520000000001ddddddddde777766d6666d000000000026200100000000000000000000000000000000010001111d2010111ddd1d6d11222211011112111115ddd50000000002dddddddddd676e676ddddd00000000001d50010000000000000000000000000000000001100111d00000015d661d66d0212110111111111115ddd2000000001ddddddddddddd424e6ddddd10000000001dd1000000000000000000000000000000000000001111100011015d66d1c66121210001111111112555d100000001ddddddddddddddd222ddddddd00000000015dd00000000000000000000000000000000000000111d00001100ddd6d1666d2211000111111111555d5000000005dddddddddddddddd2eddddddd100000000011d10000000000000000000000000000000000000000100000110d66dd16666221000000001000155dd100000001ddddddddddddddddd2dddddddd100000000010000000000000000000000000000000000000000000000000110266661dd6d2100000000000005dddd100000002dddddddddddddddddddddddddd50000000001000000000000000000000000000000000000000000000000012016776006775100000000000015ddd5000000005dddddd6666666666ddddddddddd000000000100000000000000000000000000000000000000000000000000d01776dd1d775100000000001155ddd111000001ddd6666666767766666ddddddddd100000000110000000000000000000000000000000000000000000000000dd066d66dc662000000001015d55544222112224effffff666677776777666dd666d500000000110000000000000000000000000000000000000000000000000dd0d6dd6d0d6100000115555525222422224224effffffffff66766766677776444dd000000001111111221110000000000000000000000000000000000000001505ddd66667000001dddd510244244222224efffffffffffff77777666766641222d1000000012222225ddddd210000000000000000000000000000000000001101ddd66667000005dddd2002444422222effffffffffffffff66776666dddd1222dddd511111222222222ddddd5100000000000000000000000000000000000501d2d6616701001dddd2022242442424efffffffffffffffff6666d22d6676d11dddd2221111221221115ddddddddd100000000000000000000000000000000d11d12d6d67151015555222224422244fffffffffffffffffff6d5ddd666667d1dddd1111111111111125ddddddddd6ddd100000000000000000000000000000d505111d66711001111224222444224ffffffffffffffffffffed666666676662d2d2111111111111015ddddddddddddddd2000000000000000000000000000012011111d6611110000446d2224444ffffffffffffffffffffff677676677676dd221111111111111122d55ddddddddddddd510000000000000000000000000011011110156dd511001e6e6444d4efffffffee4444449effffff666666666677d222111111100110012255dddd225ddddd55dd100000000000000000000000000101111101dddd110024e7764444ffffffffe411000000524eee666666766666222111100000011011255dd5212ddddddd22222000000000000000000000000000001121005dddd211222e76664effffffffff40000000000002666666667666222111100100110112225d5112ddd5dddd2222210000000000000000000000000000125111d66666dd442467ed4ffffffffffff4000000000111d66d6dd66666212111000000100112225212ddd512dddd212222510000000000000000000000000011d515d666666d44424ed04fffffffffffff400000000001d6666266dd666d111100000010112225212ddd112dddddd11222dd10000000000000000000000000112225d666666d222222204ffffffffffffff400000000001666666566d66d1110000001101122222dd52125ddddddd11125ddd2100000000000000000000000211115d666666e2422221049f99effffffffff20000000002dd5666662666d1100000011011222222dd215ddddddddd111225d55225210000000000000000000111102d66666d44244221049e49fffff99ffffe000000000215d6d666dd6dd100000001101122222d521ddddddd2ddd1111221155dddddd21000000000000000111111566666d22444211049e49ff9effffffffe000000005dd6d1ddd65122000000000111122222d22ddddddd22ddd201111155555555ddd1000000000000000111100666666dd22420210494ef99ffffffffff64000000dd66d2dd66ddd200000000011112222222ddddddd21dddd21110122222255555510000000000000001111006666666d212224204424999ffffffffffff4000016d21d66641d2d100000000011122222225ddddd5215dddd2010111122222222551000000000000000011000666666d21001022252224e9effffffff9fffe00025dd2dd5d22d65100000000111112222225dddd521dddddd2001111111111221221000000000000000000000666666d10000001125224e4effeffff9efff7f50225dd4421dd215100000000110122222255dd55215dddddd500101111011222122100000000000000000000066666666d110000005224429f99f9999fffffff244dd215d66d221000000000111122222225dd5225ddddddd500011110011111122000000000000000000000066666666666dd51112522554f9f9249ffffffff6d5112d6d212dd200000000001012222522552225ddddddddd10011110111111111100000000000000000000066666666666666666d222224999229ffffffffff6212d52221d6500000000000001222252255222dddddddddd100110011111111100000000000000000000000666666666666666d2110022544424effeffffffff2125212222210000000000000112222222222ddddddddddd1010001101111110000000000000000000000006666666666666d221000002244524ffeffffffff7f21112dd21110000000000000112222222225d5ddddddddd2110011101111000000000111000000000000006666666666666d22100000005422599eefffffffffe1111112221000000000000001122222225555555d5dd25510011111110000010000010000000000000000666666666666666d111000000522254efeeffffffff41101111200000000000000011222122225555552552155101111110000011100001100000000000001006666666666666666dd11000000220549a9ffffffffffe00111110000000000000001112212522255552551125510000010000001100000010000000000000000666666666666666666d1110000020249fffffff9fffff50110000000000000000000112222222222222211155d1000000000000000000001000000000000000066666666666666666666d1110000112494444449fffffe0000000000000000000000111222222222222112555210000000000101110000000000000000000000666666666666666666666d1111000102422224efffffff6ddd55ddddd110000000000111122222222522551100000000000000111100000010000000000000006666666666666666666666621100000022224effffffff77666666666666d1000000011111222222222511000000001111111000000000100000000000000000666666666666666666666666d21000000254e9fffffffffff6666666666666d21100001111122121111100011222222255555555210000100000010000000000666666666666666666666666666d1010005e44ffffffffffff6666666666666d111000111111111111100112221222222222255dd5100000000000000000000066666666666666666666666666666d1100054efffffffffffff666666666666d111000011111111111011222112222222222222111000000110000000000000066666666666666666666666666666662100049fffffffffffe26666666666666d11000001111111111112111122111122222211000000000000000000000000066666666666666666666666666666666d100249ffffe4e77777777777766666665110000001111111111111122111222221111011110000000000000000000006666666666666666666666666666666666d1004eff42d777777777777777ee766d11100000111011111111111111121111111111111000000100000000000000666666666666666666666666666666666666d004e5004677777777ee7fee6e6766d11000000111111111111111111110011111111110000000000000000000006666666666666666666666666666666666666d102000246777777647764242446ed210000001111111111111111111100111111111100000000000000000000066666666666666666666666666666666666666610000222e777764677e2e442e22d5100000011001111111011111111111111111111000100000000000000000"

  for i=0,#img+1 do
    local chr=sub(img,i+1,i+1)
    pset(i%128,
    	flr(i/128),
	   	convert_hex2num(chr))
  end
end

local str2hex_table={}
str2hex_table["0"]=0
str2hex_table["1"]=1
str2hex_table["2"]=2
str2hex_table["3"]=3
str2hex_table["4"]=4
str2hex_table["5"]=5
str2hex_table["6"]=6
str2hex_table["7"]=7
str2hex_table["8"]=8
str2hex_table["9"]=9
str2hex_table["a"]=10
str2hex_table["b"]=11
str2hex_table["c"]=12
str2hex_table["d"]=13
str2hex_table["e"]=14
str2hex_table["f"]=15

function convert_hex2num(value)
	return str2hex_table[value]
end

